{"version":3,"file":"index.es.js","sources":["../src/index.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\n\nconst getMql = () => {\n  if (typeof window === 'undefined') {\n    return\n  }\n  return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)')\n}\n\nconst getSystemTheme = (matches: boolean) => (matches ? 'dark' : 'light')\n\nexport type SystemTheme = 'dark' | 'light'\n\nconst getDefaultTheme = (isSSR: boolean): SystemTheme => {\n  if (!isSSR) {\n    const mql = getMql()\n    if (mql) {\n      return getSystemTheme(mql.matches)\n    }\n  }\n  return 'light'\n}\n\nconst useSystemTheme = (isSSR: boolean = false) => {\n  const defaultTheme = getDefaultTheme(isSSR)\n  const [systemTheme, setSystemTheme] = useState<SystemTheme>(defaultTheme)\n  useEffect(() => {\n    const mql = getMql()\n    const mqlListener = (e: any) => setSystemTheme(getSystemTheme(e.matches))\n    if (mql) {\n      setSystemTheme(getSystemTheme(mql.matches))\n      mql.addListener(mqlListener)\n    }\n    return () => mql && mql.removeListener(mqlListener)\n  }, [])\n  return systemTheme\n}\n\nexport default useSystemTheme\n"],"names":[],"mappings":";;AAEA,IAAM,MAAM,GAAG;IACb,IAAI,OAAO,MAAM,KAAK,WAAW,EAAE;QACjC,OAAM;KACP;IACD,OAAO,MAAM,CAAC,UAAU,IAAI,MAAM,CAAC,UAAU,CAAC,8BAA8B,CAAC,CAAA;CAC9E,CAAA;AAED,IAAM,cAAc,GAAG,UAAC,OAAgB,IAAK,QAAC,OAAO,GAAG,MAAM,GAAG,OAAO,IAAC,CAAA;AAIzE,IAAM,eAAe,GAAG,UAAC,KAAc;IACrC,IAAI,CAAC,KAAK,EAAE;QACV,IAAM,GAAG,GAAG,MAAM,EAAE,CAAA;QACpB,IAAI,GAAG,EAAE;YACP,OAAO,cAAc,CAAC,GAAG,CAAC,OAAO,CAAC,CAAA;SACnC;KACF;IACD,OAAO,OAAO,CAAA;CACf,CAAA;AAED,IAAM,cAAc,GAAG,UAAC,KAAsB;IAAtB,sBAAA,EAAA,aAAsB;IAC5C,IAAM,YAAY,GAAG,eAAe,CAAC,KAAK,CAAC,CAAA;IACrC,IAAA,2BAAmE,EAAlE,mBAAW,EAAE,sBAAqD,CAAA;IACzE,SAAS,CAAC;QACR,IAAM,GAAG,GAAG,MAAM,EAAE,CAAA;QACpB,IAAM,WAAW,GAAG,UAAC,CAAM,IAAK,OAAA,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,GAAA,CAAA;QACzE,IAAI,GAAG,EAAE;YACP,cAAc,CAAC,cAAc,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAA;YAC3C,GAAG,CAAC,WAAW,CAAC,WAAW,CAAC,CAAA;SAC7B;QACD,OAAO,cAAM,OAAA,GAAG,IAAI,GAAG,CAAC,cAAc,CAAC,WAAW,CAAC,GAAA,CAAA;KACpD,EAAE,EAAE,CAAC,CAAA;IACN,OAAO,WAAW,CAAA;CACnB,CAAA;;;;"}